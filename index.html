<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jasmine‚Äôs Checklist</title>

<!-- Fraunces font -->
<link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600;700&display=swap" rel="stylesheet">

<style>
.checklist {
  list-style: none;
  padding: 0;
  max-width: 300px;
  margin: 0 auto;
  font-family: 'Fraunces', serif;
}

.checklist li {
  display: flex;
  align-items: center;
  padding: 10px;
  background: #f0f0f0;
  margin-bottom: 10px;
  border-radius: 6px;
  transition: background 0.5s, color 0.5s;
  cursor: pointer;
  position: relative;
}

.checklist li.checked {
  background: rgba(168,198,134,0.5); /* green fade */
  animation: checkAnim 0.5s ease-out;
  color: #fff;
}

.checklist li::before {
  content: "üéÅ";
  margin-right: 10px;
  font-size: 18px;
  transition: transform 0.3s ease;
}

.checklist li.checked::before {
  content: "üìó";
  color: gray;
  transform: scale(1.3);
}

@keyframes checkAnim {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

#statusBox {
  position: fixed;
  top: 10px;
  left: 10px;
  background: #f0f0f0;
  border-radius: 6px;
  padding: 6px 10px;
  font-family: 'Fraunces', serif;
  font-size: 14px;
  box-shadow: 0 0 5px rgba(0,0,0,0.1);
}

#passwordBox {
  position: fixed;
  top: 10px;
  right: 10px;
  background: #fff;
  border-radius: 6px;
  padding: 6px 10px;
  font-family: 'Fraunces', serif;
  font-size: 14px;
  box-shadow: 0 0 5px rgba(0,0,0,0.1);
}

#passwordBox input {
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px;
}
</style>
</head>

<body>
<div id="statusBox">Last Updated: ...</div>
<div id="passwordBox">
  Password: <input type="password" id="adminPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
  <button id="loginBtn">Enter</button>
</div>

<ul class="checklist" id="checklist">
  <li data-id="0">Watamote</li>
  <li data-id="1">Komi can't communicate</li>
  <li data-id="2">Seaside stranger</li>
  <li data-id="3">Hirano to Kagiura</li>
  <li data-id="4">Sasaki to Miyano</li>
  <li data-id="5">Given</li>
  <li data-id="6">Fly me to the moon</li>
  <li data-id="7">Hate me but let me stay</li>
  <li data-id="8">Lucky star</li>
  <li data-id="9">Heavens officials blessing</li>
  <li data-id="10">Cherry magic</li>
  <li data-id="11">Ouran high school host club</li>
  <li data-id="12">Doraemon</li>
  <li data-id="13">Junji Ito Collection: Tomie</li>
  <li data-id="14">Junji Ito Collection: Uzumaki</li>
  <li data-id="15">Lost in the Cloud</li>
  <li data-id="16">Nana</li>
  <li data-id="17">My Love mix-up!</li>
  <li data-id="18">Yona of the Dawn</li>
  <li data-id="19">Cardcaptor Sakura</li>
  <li data-id="20">Orange</li>
  <li data-id="21">K-On!</li>
  <li data-id="22">Sailor Moon</li>
  <li data-id="23">I Hear the Sunspot</li>
  <li data-id="24">Nichijou: My Ordinary Life</li>
  <li data-id="25">Yotsuba&!</li>
  <li data-id="26">Oshi No Ko</li>
  <li data-id="27">[Magazine] Ciao</li>
  <li data-id="28">[Magazine] Dear+</li>
  <li data-id="29">[Magazine] Cheri+</li>
</ul>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDSxe-Qf2KPWHMyzn2VLY9YLTwvSudwN1Y",
  authDomain: "jassminechecklist.firebaseapp.com",
  projectId: "jassminechecklist",
  storageBucket: "jassminechecklist.firebasestorage.app",
  messagingSenderId: "1016129626879",
  appId: "1:1016129626879:web:fd18483f04d9679bd5e2ca"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const checklist = document.getElementById('checklist');
const statusBox = document.getElementById('statusBox');
const adminPassInput = document.getElementById('adminPass');
const loginBtn = document.getElementById('loginBtn');

let isAdmin = false;

async function loadChecklist() {
  const docRef = doc(db, "checklist", "main");
  const docSnap = await getDoc(docRef);
  if (docSnap.exists()) {
    const data = docSnap.data();
    statusBox.textContent = "Last Updated: " + (data.lastUpdated || "unknown");
    checklist.querySelectorAll("li").forEach(item => {
      const id = item.dataset.id;
      if (data.state && data.state[id]) item.classList.add("checked");
      else item.classList.remove("checked");
    });
  } else {
    statusBox.textContent = "Last Updated: never";
  }
}
await loadChecklist();

async function saveChecklist() {
  if (!isAdmin) return;
  const state = {};
  checklist.querySelectorAll("li").forEach(item => {
    state[item.dataset.id] = item.classList.contains("checked");
  });
  await setDoc(doc(db, "checklist", "main"), {
    state,
    lastUpdated: new Date().toLocaleString(),
  });
  statusBox.textContent = "Last Updated: just now";
}

checklist.querySelectorAll("li").forEach(item => {
  item.addEventListener("click", async () => {
    if (!isAdmin) return;
    item.classList.toggle("checked");
    await saveChecklist();
  });
});

function handleLogin() {
  if (adminPassInput.value === "JasminesDataBase") {
    isAdmin = true;
    alert("Developer mode activated ‚Äî you can now edit the list.");
  } else {
    alert("Incorrect password.");
  }
}

loginBtn.addEventListener("click", handleLogin);
adminPassInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter") handleLogin();
});
</script>
</body>
</html>
